<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
     xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" 
     layout:decorate="~{include/chat_layout}">
<th:block layout:fragment="content">
<body>

        <!-- ============================================================== -->
        <!-- Page wrapper  -->
        <!-- ============================================================== -->
        <div class="page-wrapper">
			<!-- ============================================================== -->
            <!-- Container fluid  -->
            <!-- ============================================================== -->
            <div class="container-fluid pb-0 pt-4">
                <div class="row">
                    <div class="col-md-12">
                        <div class="card">
                        	<!--채팅방 목록 + 채팅방 시작 -->
                            <div class="row no-gutters">
                            	<!-- 채팅방 목록 시작 -->
                                <div class="col-lg-3 border-right">
                                   	<!-- 채팅방 목록 검색창 시작 -->
                                    <div class="card-body border-bottom">
                                        <form>
                                            <input class="form-control" type="text" placeholder="Search Contact">
                                        </form>
                                    </div>
                                    <!-- 채팅방 목록 검색창 검색창 끝 -->
                                    <!-- 개설된 채팅방 목록 시작 -->
                                    <div class="scrollable position-relative" style="height: 70vh;">
                                        <ul class="mailbox list-style-none">
                                            <li>
                                                <div class="message-center">
                                                    <th:block th:if="${#lists.isEmpty(ccrDtoList)}">
                                                    	<p>생성된 채팅방이 없습니다.</p>
                                                    </th:block>
                                                    <th:block th:if="${!#lists.isEmpty(ccrDtoList)}">
                                                    	<!-- Message -->
	                                                    <a th:each="ccrDto, ccrDtoStat : ${ccrDtoList}"
	                                                    	href="javascript:void(0)"
	                                                        class="message-item d-flex align-items-center border-bottom px-3 py-2">
	                                                        <div class="user-img"><img th:src="@{'/UploadImg/employee/' + ${ccrDto.room_pic}}" 
	                                                                alt="user" class="img-fluid rounded-circle" 
	                                                                style="aspect-ratio: 1/1; object-fit: cover;" 
	                                                                width="40px"> <span
	                                                                class="profile-status busy float-right"></span>
	                                                        </div>
	                                                        <div class="w-75 d-inline-block v-middle pl-2">
	                                                            <h6 class="message-title mb-0 mt-1" th:text="${ccrDto.room_name}"></h6>
	                                                            <span class="font-12 text-nowrap d-block text-muted text-truncate" 
	                                                            th:text="${ccrDto.last_chat}"></span>
	                                                            <span class="font-12 text-nowrap d-block text-muted" 
	                                                            th:text="${ccrDto.last_time}"></span>
	                                                        </div>
	                                                    </a>
                                                    </th:block>
                                                    
                                                    
                                                    
                                                </div>
                                            </li>
                                        </ul>
                                    </div>
                                    <!-- 개설된 채팅방 목록 끝 -->
                                </div>
                                <!--채팅방 목록 끝 -->
                                <!-- 채팅방 상세 시작 -->
                                <div class="col-lg-9">
                                    <div class="chat-box scrollable position-relative"
                                        style="height: 70vh;">
                                        <!--chat Row -->
                                        <ul class="chat-list list-style-none px-3 pt-3">
                                            <!--chat Row -->
                                            <li class="chat-item list-style-none mt-3">
                                                <div class="chat-img d-inline-block"><img
                                                        src="assets/images/users/1.jpg" alt="user"
                                                        class="rounded-circle" width="45">
                                                </div>
                                                <div class="chat-content d-inline-block pl-3">
                                                    <h6 class="font-weight-medium">James Anderson</h6>
                                                    <div class="msg p-2 d-inline-block mb-1">Lorem
                                                        Ipsum is simply
                                                        dummy text of the
                                                        printing &amp; type setting industry.</div>
                                                </div>
                                                <div class="chat-time d-block font-10 mt-1 mr-0 mb-3">10:56 am
                                                </div>
                                            </li>
                                            <!--chat Row -->
                                            <li class="chat-item list-style-none mt-3">
                                                <div class="chat-img d-inline-block"><img
                                                        src="assets/images/users/2.jpg" alt="user"
                                                        class="rounded-circle" width="45">
                                                </div>
                                                <div class="chat-content d-inline-block pl-3">
                                                    <h6 class="font-weight-medium">Bianca Doe</h6>
                                                    <div class="msg p-2 d-inline-block mb-1">It’s
                                                        Great opportunity to
                                                        work.</div>
                                                </div>
                                                <div class="chat-time d-block font-10 mt-1 mr-0 mb-3">10:57 am
                                                </div>
                                            </li>
                                            <!--chat Row -->
                                            <li class="chat-item odd list-style-none mt-3">
                                                <div class="chat-content text-right d-inline-block pl-3">
                                                    <div class="box msg p-2 d-inline-block mb-1">I
                                                        would love to
                                                        join the team.</div>
                                                    <br>
                                                </div>
                                            </li>
                                            <!--chat Row -->
                                            <li class="chat-item odd list-style-none mt-3">
                                                <div class="chat-content text-right d-inline-block pl-3">
                                                    <div class="box msg p-2 d-inline-block mb-1 box">
                                                        Whats budget
                                                        of the new project.</div>
                                                    <br>
                                                </div>
                                                <div class="chat-time text-right d-block font-10 mt-1 mr-0 mb-3">
                                                    10:59 am</div>
                                            </li>
                                            <!--chat Row -->
                                            <li class="chat-item list-style-none mt-3">
                                                <div class="chat-img d-inline-block"><img
                                                        src="assets/images/users/3.jpg" alt="user"
                                                        class="rounded-circle" width="45">
                                                </div>
                                                <div class="chat-content d-inline-block pl-3">
                                                    <h6 class="font-weight-medium">Angelina Rhodes</h6>
                                                    <div class="msg p-2 d-inline-block mb-1">Well we
                                                        have good budget
                                                        for the project
                                                    </div>
                                                </div>
                                                <div class="chat-time d-block font-10 mt-1 mr-0 mb-3">11:00 am
                                                </div>
                                            </li>
                                            <!--chat Row -->
                                            <li class="chat-item odd list-style-none mt-3">
                                                <div class="chat-content text-right d-inline-block pl-3">
                                                    <div class="box msg p-2 d-inline-block mb-1">I
                                                        would love to
                                                        join the team.</div>
                                                    <br>
                                                </div>
                                            </li>
                                            <!--chat Row -->
                                            <li class="chat-item odd list-style-none mt-3">
                                                <div class="chat-content text-right d-inline-block pl-3">
                                                    <div class="box msg p-2 d-inline-block mb-1 box">
                                                        Whats budget
                                                        of the new project.</div>
                                                    <br>
                                                </div>
                                                <div class="chat-time text-right d-block font-10 mt-1 mr-0 mb-3">
                                                    10:59 am</div>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="card-body border-top">
                                        <div class="row">
                                            <div class="col-9">
                                                <div class="input-field mt-0 mb-0">
                                                    <input id="textarea1" placeholder="Type and enter"
                                                        class="form-control border-0" type="text">
                                                </div>
                                            </div>
                                            <div class="col-3">
                                                <a class="btn-circle btn-lg btn-cyan float-right text-white"
                                                    href="javascript:void(0)"><i class="fas fa-paper-plane"></i></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- 채팅방 상세 끝 -->
                            </div>
                            <!--채팅방 목록 + 채팅창 끝 -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- ============================================================== -->
            <!-- End Container fluid  -->
            <!-- ============================================================== -->
            <!-- ============================================================== -->
            <!-- footer -->
            <!-- ============================================================== -->
            <footer class="footer text-center pt-0">
                All Rights Reserved by Adminmart. Designed and Developed by <a
                    href="https://wrappixel.com">WrapPixel</a>.
            </footer>
            <!-- ============================================================== -->
            <!-- End footer -->
            <!-- ============================================================== -->
        </div>
        <!-- ============================================================== -->
        <!-- End Page wrapper  -->
        <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- This page JavaScript -->
    <!-- ============================================================== -->
    <script>
        $(function () {
            $(document).on('keypress', "#textarea1", function (e) {
                if (e.keyCode == 13) {
                    var id = $(this).attr("data-user-id");
                    var msg = $(this).val();
                    msg = msg_sent(msg);
                    $("#someDiv").append(msg);
                    $(this).val("");
                    $(this).focus();
                }
            });
        });
    </script>
    <!-- ============================================================== -->
    <!-- end page JavaScript -->
    <!-- ============================================================== -->
</body>

</html>